.. include:: <mmlalias.txt>

.. ot-topic:: cxx11.new_language_features.memory_model


The C++ Memory Model
====================

.. contents::
   :local:

jjj
---

* memory order

  * sequentially consistent: e.g. atomic++ 
  * acquire: mutex/spinlock
  * release: mutex/spinlock
  * relaxed: danger

* spin lock, as a demo? ``std::this_thread::yield()``
* read modify write
* volatile; jf bastien "deprecating volatile"
* ref to compiler optimizations (but no: this is not about compilers)
* cache invalidation

Links
-----

* `C++ Memory Model: from C++11 to C++23 - Alex Dathskovsky
  <https://youtu.be/tjcU2xDmuFQ?si=uKahmiSRZdS87Xzh>`__

  .. raw:: html

     <iframe width="560" height="315" 
             src="https://www.youtube.com/embed/tjcU2xDmuFQ?si=uKahmiSRZdS87Xzh" 
	     title="YouTube video player" 
	     frameborder="0" 
	     allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
	     referrerpolicy="strict-origin-when-cross-origin" 
	     allowfullscreen>
     </iframe>

  jjj
	   
  * 30:30 reordering/deadlock
  * 34:20 funny quiz

* `The memory model in C++ - Rainer Grimm - Meeting C++ 2016
  <https://youtu.be/e0DsVqZLMzU?si=mj9ETF1-CyarbGcN>`__

  .. raw:: html

     <iframe width="560" height="315" 
             src="https://www.youtube.com/embed/e0DsVqZLMzU?si=xG0GcV-pACRlJ7EQ" 
	     title="YouTube video player" 
	     frameborder="0" 
	     allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
	     referrerpolicy="strict-origin-when-cross-origin" 
	     allowfullscreen>
     </iframe>

* `Arvid Norberg: The C++ memory model: an intuition <https://youtu.be/OyNG4qiWnmU?si=1xLDFrgdHW9Ak0vZ>`__

  .. raw:: html

     <iframe width="560" height="315" 
             src="https://www.youtube.com/embed/OyNG4qiWnmU?si=mmZdH5XCN3lc1WJZ" 
	     title="YouTube video player" 
	     frameborder="0" 
	     allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
	     referrerpolicy="strict-origin-when-cross-origin" 
	     allowfullscreen>
     </iframe>
