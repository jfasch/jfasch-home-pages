
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta content="Vor- und Nachbearbeitung eines zweitägigen Python Trainings" name="description" />
<meta content="schulung, training, programming, python" name="keywords" />

    <title>Python (12.11.2019 - 14.11.2019 in Graz) &#8212; Jörg Faschingbauer</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/css/jf-alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" />
    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
    <script src="../../../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    <link rel="canonical" href="https://www.faschingbauer.me/trainings/log/detail/2019-11-12/index.html" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Goals of this Training" href="code/BigPlan.html" />
    <link rel="prev" title="IPC in Linux (10.1.2020 in Graz)" href="../2020-01-10/index.html" /> 
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />
 
<link
  rel="alternate"
  type="application/atom+xml"
  href="../../../../blog/atom.xml"
  title="Jörg Faschingbauer"
/>
 
<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../../../index.html">
    <img class="logo" src="../../../../_static/logo.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">Linux und Open Source</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Schulungen</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Kursangebot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../material/index.html">Unterlagen &amp; Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../org.html">Organisatorisches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../codex.html">Datenschutz</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Bisher Gehaltene</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../codex.html">Richtlinien zur Veröffentlichung von Kursmaterial</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Details</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../2022-03-15/index.html">Python Advanced (2022-03-15 - 2022-03-17)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2022-02-23/index.html">Python Basics (2022-02-23 - 2022-02-25)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2022-01-17/index.html">Programmierung Grundlagen, anhand von Python (2022-01-17 - 2022-01-10)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-12-06/index.html">C/C++ Programming (2021-12-06 - 2021-12-10, 2022-01-24 - 2022-02-04)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-12-01/index.html">Python Advanced (2021-12-01 - 2021-12-03)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-11-17/index.html">Python Basics (2021-11-17 - 2021-11-19)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-08-31/index.html">Python Basics (2021-08-31 - 2021-09-01)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-08-23/index.html">Python Grundlagen (2021-08-23 - 2021-08-25)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-08-02/index.html">Programmierung Grundlagen, anhand von Python (2. und 3.8.2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-07-12/index.html">The C++ Programming Language (2021-07-12 - 2021-07-16)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-06-14/index.html">Programmieren mit C (2021-06-14 - 2021-06-18)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-05-25/index.html">Python Advanced (2021-05-25 - 2021-05-27)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-05-03/index.html">Python Grundlagen (2021-05-03 - 2021-05-05)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-04-12/index.html">Programmierung Grundlagen (12. und 13.4.2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-03-29/index.html">Linux Basics, Shell Scripting (2021-03-29)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-03-22/index.html">Python Basic and Advanced (22.3.2021 - 25.3.2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-03-15/index.html">2021-03-15</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-02-22/index.html">Python Basics (22.2.2021 - 24.2.2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-01-13/index.html">Programmierung Grundlagen (13. und 14.1.2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2021-03-08/index.html">Linux Kernel Driver Development Basics (14.12.2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2020-11-30/index.html">Linux Basics (30.11.2020 - 3.12.2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2020-11-23/index.html">Python Basics (23.11.2020 - 25.11.2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2020-11-03/index.html">Linux on Raspberry Pi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2020-10-19/index.html">Python Basic and Advanced (19.10.2020 - 22.10.2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2020-09-28/index.html">Python Basics (28.9.2020 - 30.9.2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2020-09-07/index.html">Python Advanced (7.9.2020 - 10.9.2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2020-05-18/index.html">Python Individualtraining (18.5.2020 - 19.5.2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2020-05-12/index.html">Python Grundlagen (13.5.2020 - 14.5.2020 bei einer Firma in Graz)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2020-03-30/index.html">C++ für Embedded C Programmierer (30.3.2020 - 3.4.2020 Baden Württemberg)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2020-01-10/index.html">IPC in Linux (10.1.2020 in Graz)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Python (12.11.2019 - 14.11.2019 in Graz)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="code/BigPlan.html">Goals of this Training</a></li>
<li class="toctree-l4"><a class="reference internal" href="code/LiveHacking.html">Random Live Hacking</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../2019-10-28/index.html">Python Individualtraining (5 Tage, beginnend 28.10.2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2015-11-30/index.html">Kursnotizen: Linux Embedded 2015-11-30</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2013-10-01/index.html">Qualivision, Zürich, 1.10.2013</a></li>
<li class="toctree-l3"><a class="reference internal" href="../FH-ECE-19/index.html">Embedded Computing 1+2, ECE 19</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../about/myself/index.html">Über Mich</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../about/site/index.html">About This Site</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Blog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../blog/index.html">Posts</a></li>
</ul>


        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
             <section id="python-12-11-2019-14-11-2019-in-graz">
<h1>Python (12.11.2019 - 14.11.2019 in Graz)<a class="headerlink" href="#python-12-11-2019-14-11-2019-in-graz" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<aside class="sidebar">
<p class="sidebar-title">Inhalt</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#standardthemen" id="id8">Standardthemen</a></p></li>
<li><p><a class="reference internal" href="#das-hauptthema-numerik-numpy" id="id9">Das Hauptthema: Numerik, NumPy</a></p></li>
<li><p><a class="reference internal" href="#lesen-von-mat-files" id="id10">Lesen von <code class="docutils literal notranslate"><span class="pre">.mat</span></code> Files</a></p></li>
<li><p><a class="reference internal" href="#losen-einer-uni-ubung" id="id11">Lösen einer Uni-Übung</a></p></li>
</ul>
</div>
</aside>
<aside class="sidebar">
<p class="sidebar-title">Material</p>
<p><a class="reference internal" href="../../../material/soup/python/basics/group.html"><span class="doc">Python: The Language Fundamentals</span></a></p>
</aside>
<p>Eine Einführung in Python und <a class="reference external" href="https://numpy.org/">NumPy</a>, zur
Beantwortung der Frage, “Ist die Herrschaft von MATLAB
absolut?”. Gestellt von einer Firma aus dem Raum Graz, gehalten in den
Schulungsräumen von <a class="reference external" href="https://www.tectrain.at/seminare/themen/programmierung/python-grundlagen">tecTrain (Graz)</a>,
über die der Kurs gebucht wurde. Platzhirsche sind schwer zu schlagen,
haben wir herausgefunden, aber Python ist auf einem sehr guten
Weg. Spass hatten wir allemal.</p>
<blockquote>
<div><p><em>“Die Schulung war unglaublich lustig und hat mir einen sehr guten
Überblick über Python vermittelt, ich habe gelernt wie ich es auf
für mich relevante Probleme anwende und was es dabei zu beachten
gilt.</em></p>
<p><em>Zudem war der Kursleiter sehr sympathisch und kompetent. Ich
würde es also jederzeit weiterempfehlen bzw. wiederholen.”</em></p>
</div></blockquote>
<p>Danke Christoph, sowas nettes hat noch nie jemand zu mir gesagt!</p>
<section id="standardthemen">
<h2><a class="toc-backref" href="#id8">Standardthemen</a><a class="headerlink" href="#standardthemen" title="Permalink to this headline">¶</a></h2>
<p>Die Datentypen, und das “Normale” an Python waren schnell erklärt. Ich
kanns nicht lassen, bevor die Anfängerthemen vorbei sind, auf dem
Besten von Python herumzureiten: Iteration und Generatoren. Hier hatte
ich eine kleine Demo gehackt - zum x-ten mal. Das ganze Fibonacci-Zeug
gibts jetzt als <a class="reference internal" href="../../../material/soup/python/advanced/iteration-generation/python_1010_generators_yield/screenplay.html"><span class="doc">Live-Hacking-Screenplay</span></a></p>
</section>
<section id="das-hauptthema-numerik-numpy">
<h2><a class="toc-backref" href="#id9">Das Hauptthema: Numerik, NumPy</a><a class="headerlink" href="#das-hauptthema-numerik-numpy" title="Permalink to this headline">¶</a></h2>
<p>Siehe dazu auch <a class="reference internal" href="code/BigPlan.html"><span class="doc">ein Jupyter Notebook “BigPlan”</span></a>
(<a class="reference download internal" download="" href="../../../../_downloads/5db47bbe2ebd1a322ffe3119db35ddb1/BigPlan.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">download</span></code></a>).</p>
<p>Der Chef hat mir bei einem Vorgespräch ein Übungsbeispiel für die
Teilnehmer mitgegeben: ausgehend von einem Spektralbild (sagt man
so?), verwende den <a class="reference external" href="https://en.wikipedia.org/wiki/K-means_clustering">K-Means Clusteringalgorithmus</a>, um die Bereiche
auf dem Bild zu kategorisieren (die abgebildeten Stücke zu erkennen).</p>
<p>Ich hab mir erlaubt, für die Kursvorbereitung
<a class="footnote-reference brackets" href="#ich-nix-bildverarbeitung" id="id1">1</a> so quasi als Appetizer das Problem etwas
zu reduzieren: Farbreduktion eines Bildes (auf 8 Farben). Das Programm
(siehe unten) verwendet</p>
<ul class="simple">
<li><p><a class="reference external" href="https://pillow.readthedocs.io/en/3.1.x/index.html">Pillow</a>, um
Bilddaten zu lesen und schreiben. Die Library interoperiert nahtlos
mit <a class="reference external" href="https://numpy.org/">NumPy</a>, was sicher kein Zufall ist.</p></li>
<li><p><a class="reference external" href="https://numpy.org/">NumPy</a>, um die Alpha-Plane des
Ausgangsbildes abzuschneiden und zu restoren.</p></li>
<li><p><a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.cluster.KMeans.html">Den K-Means Algorithmus aus scikit-learn</a>,
um das Clustering jemand anders machen zu lassen.</p></li>
</ul>
<figure class="align-default" id="id2">
<img alt="../../../../_images/veggie.png" src="../../../../_images/veggie.png" />
<figcaption>
<p><span class="caption-text">Ausgangsbild <code class="docutils literal notranslate"><span class="pre">veggie.png</span></code>: viele Farben</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id3">
<img alt="../../../../_images/veggie-reduced.png" src="../../../../_images/veggie-reduced.png" />
<figcaption>
<p><span class="caption-text">Reduziertes Bild <code class="docutils literal notranslate"><span class="pre">veggie-reduced.png</span></code>: Acht Farben</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Das Programm ist überschaubar - es verwendet nur Libraries und macht
nichts selbst (das ist der Plan, immer, beim Programmieren). Die
Ausdrucksstärke von Python macht sich hier bemerkbar durch z.B. die
Slice-Syntax (wegschneiden der Alpha-Plane), oder beim Iterieren
mittels <code class="docutils literal notranslate"><span class="pre">enumerate()</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../_downloads/8ed4df5d4be3c4584f95df5840fc85ca/color-reduce.py"><code class="xref download docutils literal notranslate"><span class="pre">code/color-reduce.py</span></code></a></span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">PIL.Image</span>
<span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="kn">import</span> <span class="n">KMeans</span>

<span class="kn">import</span> <span class="nn">sys</span>


<span class="n">img</span> <span class="o">=</span> <span class="n">PIL</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;veggie.png&#39;</span><span class="p">)</span>

<span class="n">imgarray</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
<span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">,</span> <span class="n">nrgba</span> <span class="o">=</span> <span class="n">imgarray</span><span class="o">.</span><span class="n">shape</span>

<span class="c1"># disregard alpha plane for clustering</span>
<span class="n">alpha</span> <span class="o">=</span> <span class="n">imgarray</span><span class="p">[:,:,</span><span class="mi">3</span><span class="p">:]</span>
<span class="n">rgb</span> <span class="o">=</span> <span class="n">imgarray</span><span class="p">[:,:,</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>

<span class="c1"># change view to a linear sequence of (r,g,b) points. (K-Means cannot</span>
<span class="c1"># take arbitrarily dimensioned spaces, he likes it linear.)</span>
<span class="n">linear_rgb</span> <span class="o">=</span> <span class="n">rgb</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="n">nrows</span><span class="o">*</span><span class="n">ncols</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="n">km</span> <span class="o">=</span> <span class="n">KMeans</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="n">km</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">linear_rgb</span><span class="p">)</span>

<span class="c1"># reduce: let cluster centers be their members</span>
<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">km</span><span class="o">.</span><span class="n">labels_</span><span class="p">):</span>
    <span class="n">linear_rgb</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">km</span><span class="o">.</span><span class="n">cluster_centers_</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>

<span class="c1"># stack saved alpha plane on top of it</span>
<span class="n">imgarray</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">rgb</span><span class="p">,</span> <span class="n">alpha</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">reduced_img</span> <span class="o">=</span> <span class="n">PIL</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">imgarray</span><span class="p">,</span> <span class="s1">&#39;RGBA&#39;</span><span class="p">)</span>
<span class="n">reduced_img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;veggie-reduced.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="lesen-von-mat-files">
<h2><a class="toc-backref" href="#id10">Lesen von <code class="docutils literal notranslate"><span class="pre">.mat</span></code> Files</a><a class="headerlink" href="#lesen-von-mat-files" title="Permalink to this headline">¶</a></h2>
<p>Das Spektralbild liegt im <code class="docutils literal notranslate"><span class="pre">.mat</span></code> Format vor - was immer das ist, hat
wahrscheinlich mit MATLAB zu tun. Etwas Recherche hat ergeben, dass
die <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.io.loadmat.html?highlight=loadmat#scipy.io.loadmat">Funktion</a>
<code class="docutils literal notranslate"><span class="pre">scipy.io.loadmat()</span></code> das kann. Hier ein kleines Testprogramm,</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../_downloads/5f34dc8089e20cc442caecd43e401bd0/mat.py"><code class="xref download docutils literal notranslate"><span class="pre">code/mat.py</span></code></a></span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>

<span class="kn">from</span> <span class="nn">scipy.io</span> <span class="kn">import</span> <span class="n">loadmat</span>
<span class="kn">import</span> <span class="nn">sys</span>


<span class="n">mat</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">mat</span><span class="p">[</span><span class="s1">&#39;imnData&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mat</span><span class="p">[</span><span class="s1">&#39;imnData&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mat</span><span class="p">[</span><span class="s1">&#39;imnData&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>

<span class="c1"># obviously &quot;imnData&quot; is what we want</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">mat</span><span class="p">[</span><span class="s1">&#39;imnData&#39;</span><span class="p">]</span>
<span class="c1"># ...</span>
</pre></div>
</div>
</div>
</section>
<section id="losen-einer-uni-ubung">
<h2><a class="toc-backref" href="#id11">Lösen einer Uni-Übung</a><a class="headerlink" href="#losen-einer-uni-ubung" title="Permalink to this headline">¶</a></h2>
<p>Eine Teilzeitmitarbeiterin der Firma, sie studiert Physik neben der
Arbeit, muss für eine Übung … was weiss ich … machen. Wie auch
immer, der Input für ihre Arbeit liegt in folgendem bekackten
Inputformat vor, das es zu parsen gilt. War eine nette
Zwischendurch-Gruppenarbeit.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../_downloads/57da971d2e54765143dec17a3d4933dd/H2O.dat.txt"><code class="xref download docutils literal notranslate"><span class="pre">code/franziska/H2O.dat.txt</span></code></a></span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="o">----------------------------</span> <span class="n">Atom</span> <span class="n">information</span> <span class="o">----------------------------</span>
     <span class="n">atom</span>    <span class="c1">#        X              Y              Z            mass</span>
 <span class="o">--------------------------------------------------------------------------</span>
    <span class="n">O</span>        <span class="mi">1</span>  <span class="mf">0.0000000E+00</span>  <span class="mf">0.0000000E+00</span> <span class="o">-</span><span class="mf">1.2662399E-01</span>  <span class="mf">1.5994910E+01</span>
    <span class="n">H</span>        <span class="mi">2</span>  <span class="mf">1.4391972E+00</span>  <span class="mf">0.0000000E+00</span>  <span class="mf">1.0048070E+00</span>  <span class="mf">1.0078250E+00</span>
    <span class="n">H</span>        <span class="mi">3</span> <span class="o">-</span><span class="mf">1.4391972E+00</span>  <span class="mf">0.0000000E+00</span>  <span class="mf">1.0048070E+00</span>  <span class="mf">1.0078250E+00</span>
 <span class="o">--------------------------------------------------------------------------</span>


          <span class="o">--------------------------------------------------------</span>
          <span class="n">MASS</span><span class="o">-</span><span class="n">WEIGHTED</span> <span class="n">PROJECTED</span> <span class="n">HESSIAN</span> <span class="p">(</span><span class="n">Hartree</span><span class="o">/</span><span class="n">Bohr</span><span class="o">/</span><span class="n">Bohr</span><span class="o">/</span><span class="n">Kamu</span><span class="p">)</span>
          <span class="o">--------------------------------------------------------</span>


               <span class="mi">1</span>            <span class="mi">2</span>            <span class="mi">3</span>            <span class="mi">4</span>            <span class="mi">5</span>            <span class="mi">6</span>            <span class="mi">7</span>            <span class="mi">8</span>            <span class="mi">9</span>
   <span class="o">-----</span> <span class="o">-----</span> <span class="o">-----</span> <span class="o">-----</span> <span class="o">-----</span>
    <span class="mi">1</span>    <span class="mf">4.05054E+01</span>
    <span class="mi">2</span>   <span class="o">-</span><span class="mf">1.61610E-24</span>  <span class="mf">0.00000E+00</span>
    <span class="mi">3</span>    <span class="mf">1.20781E-07</span>  <span class="mf">8.08051E-25</span>  <span class="mf">2.83024E+01</span>
    <span class="mi">4</span>   <span class="o">-</span><span class="mf">8.06829E+01</span>  <span class="mf">4.42629E-24</span> <span class="o">-</span><span class="mf">4.65256E+01</span>  <span class="mf">3.52600E+02</span>
    <span class="mi">5</span>   <span class="o">-</span><span class="mf">7.69570E-24</span>  <span class="mf">0.00000E+00</span>  <span class="mf">2.91733E-24</span>  <span class="mf">2.04388E-23</span>  <span class="mf">0.00000E+00</span>
    <span class="mi">6</span>   <span class="o">-</span><span class="mf">6.34292E+01</span>  <span class="mf">8.04780E-25</span> <span class="o">-</span><span class="mf">5.63758E+01</span>  <span class="mf">2.19019E+02</span>  <span class="mf">6.41217E-24</span>  <span class="mf">2.11622E+02</span>
    <span class="mi">7</span>   <span class="o">-</span><span class="mf">8.06829E+01</span>  <span class="mf">3.21912E-24</span>  <span class="mf">4.65256E+01</span> <span class="o">-</span><span class="mf">3.11752E+01</span>  <span class="mf">1.04198E-23</span>  <span class="mf">3.36702E+01</span>  <span class="mf">3.52600E+02</span>
    <span class="mi">8</span>   <span class="o">-</span><span class="mf">8.14839E-24</span>  <span class="mf">0.00000E+00</span>  <span class="mf">2.71613E-24</span>  <span class="mf">1.96373E-23</span>  <span class="mf">8.40456E-19</span>  <span class="mf">7.21369E-24</span>  <span class="mf">1.24236E-23</span>  <span class="mf">0.00000E+00</span>
    <span class="mi">9</span>    <span class="mf">6.34292E+01</span> <span class="o">-</span><span class="mf">1.60956E-24</span> <span class="o">-</span><span class="mf">5.63758E+01</span> <span class="o">-</span><span class="mf">3.36702E+01</span> <span class="o">-</span><span class="mf">1.84350E-23</span>  <span class="mf">1.29686E+01</span> <span class="o">-</span><span class="mf">2.19019E+02</span> <span class="o">-</span><span class="mf">1.92365E-23</span>  <span class="mf">2.11622E+02</span>
    
</pre></div>
</div>
</div>
<p>Der Code, mit dem wir nach einigen Runden Nachdenkens einigermaßen
zufrieden waren, sieht so aus,</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../_downloads/462dbf479a294fef5831abbc549cfe92/dat.py"><code class="xref download docutils literal notranslate"><span class="pre">code/franziska/dat.py</span></code></a></span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="k">def</span> <span class="nf">load_dat</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;load a .dat file (whatever that is) into a numpy matrix and returns</span>
<span class="sd">    that matrix.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">matrix_lines</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;----- ----- ----- ----- -----&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                <span class="n">matrix_lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;file format vergeigt&#39;</span><span class="p">)</span>

    <span class="c1"># split matrix_lines into elements</span>
    <span class="n">matrix_elements</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">matrix_lines</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">elems</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="k">del</span> <span class="n">elems</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># line-number column, unnecessary</span>
        <span class="n">matrix_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elems</span><span class="p">)</span>

    <span class="c1"># determine dimensions of (triangular?) matrix </span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">matrix_elements</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">matrix_elements</span><span class="p">))</span>

    <span class="n">matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">row_no</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">matrix_elements</span><span class="p">):</span>
        <span class="n">matrix</span><span class="p">[</span><span class="n">row_no</span><span class="p">,</span><span class="mi">0</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">)]</span> <span class="o">=</span> <span class="n">row</span>

    <span class="k">return</span> <span class="n">matrix</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">load_dat</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="ich-nix-bildverarbeitung"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Ich hatte von Bildverarbeitung keine
Ahnung</p>
</dd>
</dl>
</section>
</section>

<div class="section">
   
</div>

          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2019-2022 (GPLv3), Jörg Faschingbauer.
      
      |
      <a href="../../../../_sources/trainings/log/detail/2019-11-12/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>