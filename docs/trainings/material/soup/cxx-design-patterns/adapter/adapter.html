<!DOCTYPE html>

<html lang="en" data-content_root="../../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Adapter &#8212; Jörg Faschingbauer</title>
    <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/alabaster.css?v=cf071e93" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/css/jf-alabaster.css?v=70eaaddc" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css?v=5c84f910" />
    <script src="../../../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js?v=ffc8af2d"></script>
    <script src="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js?v=12818e64"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="canonical" href="https://www.faschingbauer.me/trainings/material/soup/cxx-design-patterns/adapter/adapter.html" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="Proxy" href="../proxy/proxy.html" />
    <link rel="prev" title="Exercise Foundation: Sensor Hierarchy" href="../sensor-hierarchy.html" />

   
  <link rel="stylesheet" href="../../../../../_static/custom.css" type="text/css" />
  

  
  


<link
  rel="alternate"
  type="application/atom+xml"
  href="../../../../../blog/atom.xml"
  title="Jörg Faschingbauer"
/>


<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet"/>


  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../../../../index.html">
    <img class="logo" src="../../../../../_static/logo.png" alt="Logo" />
    
  </a>
</p>



<p class="blurb">Linux und Open Source</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Schulungen</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../index.html">Kursangebot</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Unterlagen &amp; Download</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Topics</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../python/group.html">Python Programming: From Absolute Beginner to Advanced Productivity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../c/group.html">The C Programming Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cxx-todo/index.html">C++: TODO List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cxx/group.html">C++: Miscellaneous Live-Hacking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cxx03/group.html">C++</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cxx11/group.html">The New C++ (11-…)</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../group.html">Design Patterns With C++</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../uml/uml.html">UML Short Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../oo-principles.html">OO Design Principles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../singleton/singleton.html">Singleton</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sensor-hierarchy.html">Exercise Foundation: <code class="docutils literal notranslate"><span class="pre">Sensor</span></code> Hierarchy</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Adapter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proxy/proxy.html">Proxy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../decorator/decorator.html">Decorator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../composite/composite.html">Composite</a></li>
<li class="toctree-l4"><a class="reference internal" href="../command/command.html">Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interpreter/interpreter.html">Interpreter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../observer/observer.html">Observer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../abstract-factory/abstract-factory.html">Abstract Factory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../heating-screenplay/heating-screenplay.html">Case Study/Livehacking: Heating Control (Reading Sensors)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cxx-code/index.html">C++ Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cxx-exercises/group.html">C++ Exercises</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cmake/group.html">CMake: An Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../linux/group.html">Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../clean-code/group.html">Is Software A Craft? Software Is A Craft! ⟶ <em>Clean Code</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../unittest/group.html">Unit Testing With <code class="docutils literal notranslate"><span class="pre">googletest</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../kernel/group.html">Linux Kernel Driver Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../graph.html">Generated Topic Graph</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../org.html">Organisatorisches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../codex.html">Datenschutz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../log/index.html">Bisher Gehaltene</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../about/myself/index.html">Über Mich</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../about/site/index.html">About This Site</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Blog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../blog/index.html">Posts</a></li>
</ul>


        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
<section id="adapter">
<h1>Adapter<a class="headerlink" href="#adapter" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#problem" id="id7">Problem</a></p></li>
<li><p><a class="reference internal" href="#solution-adaptation" id="id8">Solution: Adaptation</a></p></li>
<li><p><a class="reference internal" href="#exercise" id="id9">Exercise</a></p>
<ul>
<li><p><a class="reference internal" href="#basic-adaptation" id="id10">Basic Adaptation</a></p></li>
<li><p><a class="reference internal" href="#adapter-must-be-a-sensor" id="id11">Adapter Must <em>Be-A</em> <code class="docutils literal notranslate"><span class="pre">Sensor</span></code></a></p></li>
<li><p><a class="reference internal" href="#adaptee-can-be-any-asensor" id="id12">Adaptee Can <em>Be-Any</em> <code class="docutils literal notranslate"><span class="pre">ASensor</span></code></a></p></li>
<li><p><a class="reference internal" href="#adapter-is-doing-real-measurements" id="id13">Adapter Is Doing Real Measurements</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="problem">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Problem</a><a class="headerlink" href="#problem" title="Link to this heading">¶</a></h2>
<p>The sensor hierarchy of our company covers many different
sensors. However, management has decided that it is not broad enough,
and some sensors of another company need to be added. That company has
software implementations for those sensors that we could technically
use. Naturally, those software implementations do not fit into our
hierarchy <a class="footnote-reference brackets" href="#impedance-mismatch" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<p>What they have, though, is a similar hierarchy (one interface for all
their sensors), with the only apparent difference being that they
measure in degrees Fahrenheit.</p>
<a class="reference internal image-reference" href="../../../../../_images/fahrenheit-hierarchy.png"><img alt="../../../../../_images/fahrenheit-hierarchy.png" src="../../../../../_images/fahrenheit-hierarchy.png" style="width: 701.6px; height: 510.0px;" /></a>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/fe1ac739d4ff8f2d0ed4f4f930450a1e/sensor-fahrenheit.h"><code class="xref download docutils literal notranslate"><span class="pre">/trainings/material/soup/cxx-code/design-patterns-adapter/sensors-fahrenheit/sensor-fahrenheit.h</span></code></a></span><a class="headerlink" href="#id2" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#pragma once</span>

<span class="k">class</span><span class="w"> </span><span class="nc">FahrenheitSensor</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="o">~</span><span class="n">FahrenheitSensor</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">get_temperature_f</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</section>
<section id="solution-adaptation">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Solution: Adaptation</a><a class="headerlink" href="#solution-adaptation" title="Link to this heading">¶</a></h2>
<p>Seems like we could be able to integrate all of their sensors in one
swoop, <em>easily</em>.</p>
<a class="reference internal image-reference" href="../../../../../_images/fahrenheit-adapter.png"><img alt="../../../../../_images/fahrenheit-adapter.png" src="../../../../../_images/fahrenheit-adapter.png" style="width: 701.6px; height: 510.0px;" /></a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Convert Fahrenheit to Celsius using the following formula:</p>
<div class="math notranslate nohighlight">
\[C = (F - 32) * 5 / 9\]</div>
</div>
</section>
<section id="exercise">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Exercise</a><a class="headerlink" href="#exercise" title="Link to this heading">¶</a></h2>
<p>Implement such an adapter class into our sensor hierarchy, such that
the following tests are satisfied. Implement one by one, and take your
time.</p>
<section id="basic-adaptation">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Basic Adaptation</a><a class="headerlink" href="#basic-adaptation" title="Link to this heading">¶</a></h3>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/0815ea717df9bb4a67caadad30acab80/adapter-suite-basic.cpp"><code class="xref download docutils literal notranslate"><span class="pre">/trainings/material/soup/cxx-code/design-patterns-adapter/tests/adapter-suite-basic.cpp</span></code></a></span><a class="headerlink" href="#id3" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sensor-fahrenheit.h&gt;</span><span class="c1">          // &lt;--- company A&#39;s sensor interface</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sensor-fahrenheit-const.h&gt;</span><span class="c1">    // &lt;--- one of their sensors</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sensor-fahrenheit-adapter.h&gt;</span><span class="c1">  // &lt;--- to be implemented</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sensor.h&gt;</span><span class="c1">                     // &lt;--- our sensor interface</span>

<span class="n">TEST</span><span class="p">(</span><span class="n">adapter_suite</span><span class="p">,</span><span class="w"> </span><span class="n">basic</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// buy most sophisticated sensor from A, and see if it works</span>
<span class="w">    </span><span class="n">ConstantFahrenheitSensor</span><span class="w"> </span><span class="nf">fs</span><span class="p">(</span><span class="mf">36.5</span><span class="p">);</span>
<span class="w">    </span><span class="n">ASSERT_FLOAT_EQ</span><span class="p">(</span><span class="n">fs</span><span class="p">.</span><span class="n">get_temperature_f</span><span class="p">(),</span><span class="w"> </span><span class="mf">36.5</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// adapt it into our hierarchy, converting its Fahrenheit</span>
<span class="w">    </span><span class="c1">// measurement into Celsius</span>
<span class="w">    </span><span class="n">FahrenheitSensor_Adapter</span><span class="w"> </span><span class="nf">adapter</span><span class="p">(</span><span class="o">&amp;</span><span class="n">fs</span><span class="p">);</span>
<span class="w">    </span><span class="n">ASSERT_FLOAT_EQ</span><span class="p">(</span><span class="n">adapter</span><span class="p">.</span><span class="n">get_temperature</span><span class="p">(),</span><span class="w"> </span><span class="p">(</span><span class="mf">36.5</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">5</span><span class="o">/</span><span class="mi">9</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="adapter-must-be-a-sensor">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Adapter Must <em>Be-A</em> <code class="docutils literal notranslate"><span class="pre">Sensor</span></code></a><a class="headerlink" href="#adapter-must-be-a-sensor" title="Link to this heading">¶</a></h3>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/0bc0fa61e1f2567c4754bcebb78225c9/adapter-suite-adapter--is-a--sensor.cpp"><code class="xref download docutils literal notranslate"><span class="pre">/trainings/material/soup/cxx-code/design-patterns-adapter/tests/adapter-suite-adapter--is-a--sensor.cpp</span></code></a></span><a class="headerlink" href="#id4" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sensor-fahrenheit.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sensor-fahrenheit-const.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sensor-fahrenheit-adapter.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sensor.h&gt;</span>

<span class="n">TEST</span><span class="p">(</span><span class="n">adapter_suite</span><span class="p">,</span><span class="w"> </span><span class="n">adapter__is_a__sensor</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">ConstantFahrenheitSensor</span><span class="w"> </span><span class="nf">fs</span><span class="p">(</span><span class="mf">36.5</span><span class="p">);</span>
<span class="w">    </span><span class="n">FahrenheitSensor_Adapter</span><span class="w"> </span><span class="nf">adapter</span><span class="p">(</span><span class="o">&amp;</span><span class="n">fs</span><span class="p">);</span>

<span class="w">    </span><span class="n">Sensor</span><span class="o">*</span><span class="w"> </span><span class="n">sensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adapter</span><span class="p">;</span><span class="w">                 </span><span class="c1">// &lt;--- is-a Sensor</span>

<span class="w">    </span><span class="c1">// suppress &quot;unused&quot; warning</span>
<span class="w">    </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">sensor</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="adaptee-can-be-any-asensor">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Adaptee Can <em>Be-Any</em> <code class="docutils literal notranslate"><span class="pre">ASensor</span></code></a><a class="headerlink" href="#adaptee-can-be-any-asensor" title="Link to this heading">¶</a></h3>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/618176927057b427983e4453c602ffec/adapter-suite-adapter--knows--an-a-sensor.cpp"><code class="xref download docutils literal notranslate"><span class="pre">/trainings/material/soup/cxx-code/design-patterns-adapter/tests/adapter-suite-adapter--knows--an-a-sensor.cpp</span></code></a></span><a class="headerlink" href="#id5" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sensor-fahrenheit.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sensor-fahrenheit-const.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sensor-fahrenheit-adapter.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sensor.h&gt;</span>

<span class="n">TEST</span><span class="p">(</span><span class="n">adapter_suite</span><span class="p">,</span><span class="w"> </span><span class="n">adapter__knows__an_a_sensor</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">ConstantFahrenheitSensor</span><span class="w"> </span><span class="nf">fcs</span><span class="p">(</span><span class="mf">36.5</span><span class="p">);</span>
<span class="w">    </span><span class="n">FahrenheitSensor</span><span class="o">*</span><span class="w"> </span><span class="n">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">fcs</span><span class="p">;</span><span class="w">            </span><span class="c1">// &lt;--- convert to root of A&#39;s sensor hierarchy</span>

<span class="w">    </span><span class="n">FahrenheitSensor_Adapter</span><span class="w"> </span><span class="nf">adapter</span><span class="p">(</span><span class="n">fs</span><span class="p">);</span>

<span class="w">    </span><span class="n">Sensor</span><span class="o">*</span><span class="w"> </span><span class="n">sensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adapter</span><span class="p">;</span><span class="w">              </span><span class="c1">// &lt;--- is-a Sensor</span>

<span class="w">    </span><span class="c1">// suppress &quot;unused&quot; warning</span>
<span class="w">    </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">sensor</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="adapter-is-doing-real-measurements">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Adapter Is Doing Real Measurements</a><a class="headerlink" href="#adapter-is-doing-real-measurements" title="Link to this heading">¶</a></h3>
<p>Make sure that the adapter is really doing <em>measurement</em> (i.e. <em>use</em>
the adaptee) when being asked for its temperature.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/37dfe2a6fb3921d5e3277455300bb4d5/adapter-suite-adapter-definitely-knows--a-sensor--HELL.cpp"><code class="xref download docutils literal notranslate"><span class="pre">/trainings/material/soup/cxx-code/design-patterns-adapter/tests/adapter-suite-adapter-definitely-knows--a-sensor--HELL.cpp</span></code></a></span><a class="headerlink" href="#id6" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sensor-fahrenheit.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sensor-fahrenheit-const.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sensor-fahrenheit-adapter.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sensor.h&gt;</span>


<span class="k">class</span><span class="w"> </span><span class="nc">VariableFahrenheitSensor</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">FahrenheitSensor</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">VariableFahrenheitSensor</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">initial_value</span><span class="p">)</span>
<span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="n">_value</span><span class="p">(</span><span class="n">initial_value</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">change_temperature</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">v</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">get_temperature_f</span><span class="p">()</span><span class="w"> </span><span class="k">override</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">_value</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">_value</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">TEST</span><span class="p">(</span><span class="n">adapter_suite</span><span class="p">,</span><span class="w"> </span><span class="n">adapter__definitely_knows__a_sensor__HELL</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">VariableFahrenheitSensor</span><span class="w"> </span><span class="nf">fs</span><span class="p">(</span><span class="mf">36.5</span><span class="p">);</span>
<span class="w">    </span><span class="n">FahrenheitSensor_Adapter</span><span class="w"> </span><span class="nf">adapter</span><span class="p">(</span><span class="o">&amp;</span><span class="n">fs</span><span class="p">);</span>

<span class="w">    </span><span class="n">ASSERT_FLOAT_EQ</span><span class="p">(</span><span class="n">adapter</span><span class="p">.</span><span class="n">get_temperature</span><span class="p">(),</span><span class="w"> </span><span class="p">(</span><span class="mf">36.5</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">5</span><span class="o">/</span><span class="mi">9</span><span class="p">);</span>

<span class="w">    </span><span class="n">fs</span><span class="p">.</span><span class="n">change_temperature</span><span class="p">(</span><span class="mf">42.7</span><span class="p">);</span>

<span class="w">    </span><span class="n">ASSERT_FLOAT_EQ</span><span class="p">(</span><span class="n">adapter</span><span class="p">.</span><span class="n">get_temperature</span><span class="p">(),</span><span class="w"> </span><span class="p">(</span><span class="mf">42.7</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">5</span><span class="o">/</span><span class="mi">9</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p class="rubric">Footnotes</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="impedance-mismatch" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>They sure don’t share our <code class="docutils literal notranslate"><span class="pre">Sensor</span></code>
interface. That interface is only internal to
our company.</p>
</aside>
</aside>
</section>
</section>
</section>

<div class="section ablog__blog_comments">
  
  
</div>

          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2019-2024 (GPLv3), Jörg Faschingbauer.
      
      |
      <a href="../../../../../_sources/trainings/material/soup/cxx-design-patterns/adapter/adapter.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>