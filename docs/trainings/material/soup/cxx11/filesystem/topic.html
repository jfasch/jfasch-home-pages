<!DOCTYPE html>

<html lang="en" data-content_root="../../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>std::filesystem &#8212; Jörg Faschingbauer</title>
    <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/alabaster.css?v=665e07de" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/css/jf-alabaster.css?v=70eaaddc" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css?v=5c84f910" />
    <script src="../../../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js?v=ffc8af2d"></script>
    <script src="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js?v=12818e64"></script>
    <link rel="canonical" href="https://www.faschingbauer.me/trainings/material/soup/cxx11/filesystem/topic.html" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="Drafts" href="../drafts/group.html" />
    <link rel="prev" title="New-Style Union: std::variant" href="../100-miscellaneous/any-variant-optional/variant.html" /> 
   
  <link rel="stylesheet" href="../../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />
 
<link
  rel="alternate"
  type="application/atom+xml"
  href="../../../../../blog/atom.xml"
  title="Jörg Faschingbauer"
/>
 
<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../../../../index.html">
    <img class="logo" src="../../../../../_static/logo.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">Linux und Open Source</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Schulungen</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../index.html">Kursangebot</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Unterlagen &amp; Download</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Topics</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../python/group.html">Python Programming: From Absolute Beginner to Advanced Productivity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../c/group.html">The C Programming Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cxx-todo/index.html">C++: TODO List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cxx/group.html">C++: Miscellaneous Live-Hacking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cxx03/group.html">C++</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../group.html">The New C++ (11-…)</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../010-introduction/group.html">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../020-new-language-features/group.html">New Language Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="../030-smart-pointers/group.html">Smart Pointers (<code class="docutils literal notranslate"><span class="pre">std::unique_ptr</span></code>, <code class="docutils literal notranslate"><span class="pre">std::shared_ptr</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../035-perfect-forwarding/topic.html">Perfect Forwarding</a></li>
<li class="toctree-l4"><a class="reference internal" href="../040-bind-function/group.html">Functions, Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../050-multithreading/group.html">Multithreading</a></li>
<li class="toctree-l4"><a class="reference internal" href="../100-miscellaneous/group.html">Miscellaneous</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">std::filesystem</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../drafts/group.html">Drafts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../exercises/group.html">Exercises</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cxx-design-patterns/group.html">Design Patterns With C++</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cxx-code/index.html">C++ Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cxx-exercises/group.html">C++ Exercises</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cmake/group.html">CMake: An Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../linux/group.html">Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../clean-code/group.html">Is Software A Craft? Software Is A Craft! ⟶ <em>Clean Code</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../unittest/group.html">Unit Testing With <code class="docutils literal notranslate"><span class="pre">googletest</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../kernel/group.html">Linux Kernel Driver Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../graph.html">Generated Topic Graph</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../org.html">Organisatorisches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../codex.html">Datenschutz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../log/index.html">Bisher Gehaltene</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../about/myself/index.html">Über Mich</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../about/site/index.html">About This Site</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Blog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../blog/index.html">Posts</a></li>
</ul>


        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
             <section id="std-filesystem">
<h1><code class="docutils literal notranslate"><span class="pre">std::filesystem</span></code><a class="headerlink" href="#std-filesystem" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id15">Overview</a></p></li>
<li><p><a class="reference internal" href="#fixture" id="id16">Fixture</a></p></li>
<li><p><a class="reference internal" href="#paths-composition-comparison" id="id17">Paths: Composition, Comparison</a></p></li>
<li><p><a class="reference internal" href="#absolute-and-relative-paths" id="id18">Absolute and Relative Paths</a></p></li>
<li><p><a class="reference internal" href="#path-component-access" id="id19">Path Component Access</a></p></li>
<li><p><a class="reference internal" href="#iterating-over-path-components" id="id20">Iterating Over Path Components</a></p></li>
<li><p><a class="reference internal" href="#current-working-directory" id="id21">Current Working Directory</a></p></li>
<li><p><a class="reference internal" href="#directory-creation-std-filesystem-create-directory" id="id22">Directory Creation: <code class="docutils literal notranslate"><span class="pre">std::filesystem::create_directory()</span></code></a></p></li>
<li><p><a class="reference internal" href="#directory-creation-std-filesystem-create-directories" id="id23">Directory Creation: <code class="docutils literal notranslate"><span class="pre">std::filesystem::create_directories()</span></code></a></p></li>
<li><p><a class="reference internal" href="#directory-entry-classification-std-filesystem-is-xxx" id="id24">Directory Entry Classification: <code class="docutils literal notranslate"><span class="pre">std::filesystem::is_xxx()</span></code></a></p></li>
<li><p><a class="reference internal" href="#directory-entries-basics" id="id25">Directory Entries: Basics</a></p></li>
<li><p><a class="reference internal" href="#directory-entries-std-filesystem-directory-entry" id="id26">Directory Entries: <code class="docutils literal notranslate"><span class="pre">std::filesystem::directory_entry</span></code></a></p></li>
<li><p><a class="reference internal" href="#iterating-over-directory-entries" id="id27">Iterating Over Directory Entries</a></p></li>
<li><p><a class="reference internal" href="#recursive-directory-iteration" id="id28">Recursive Directory Iteration</a></p></li>
</ul>
</nav>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This topic is usually live hacked.</p>
</div>
<section id="overview">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<aside class="sidebar">
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.cppreference.com/w/cpp/filesystem">std::filesystem</a></p></li>
</ul>
<p><strong>See also</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="../../linux/basics/shell/group.html"><span class="doc">The Shell (Bash - “Bourne Again Shell”)</span></a></p></li>
</ul>
</aside>
<ul class="simple">
<li><p>File system related stuff (obviously)</p>
<ul>
<li><p>Path manipulation</p></li>
<li><p>Directory creation and iteration ⟶ even recursive!</p></li>
<li><p>Stats like <em>size</em>, <em>access time</em></p></li>
<li><p>Permissions</p></li>
<li><p>Support routines like copy, remove, …</p></li>
</ul>
</li>
<li><p>Since C++ 17</p></li>
<li><p>Continually improved since then</p></li>
</ul>
</section>
<section id="fixture">
<h2><a class="toc-backref" href="#id16" role="doc-backlink">Fixture</a><a class="headerlink" href="#fixture" title="Link to this heading">¶</a></h2>
<aside class="sidebar">
<p><strong>See also</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="../../unittest/unittest_gtest_fixture/topic.html"><span class="doc">Unittest: GTest Fixtures</span></a></p></li>
</ul>
</aside>
<p>(Not central to this topic, just for completeness)</p>
<p>This topic is mainly livehacked, along the test cases that
follow. Each test case is executed withing a <a class="reference internal" href="../../unittest/unittest_gtest_fixture/topic.html"><span class="doc">test fixture</span></a>;
that fixture works as follows:</p>
<ul class="simple">
<li><p>Every test case has its own temporary directory, by a
<code class="docutils literal notranslate"><span class="pre">std::filesystem::path</span></code> type variable, <code class="docutils literal notranslate"><span class="pre">dirname</span></code></p></li>
<li><p>The test case run <em>inside</em> that directory; i.e. the process’s
<a class="reference internal" href="../../linux/basics/shell/cwd.html"><span class="doc">current working directory</span></a> is set to
<code class="docutils literal notranslate"><span class="pre">dirname</span></code> before the test runs, and reset to whatever it was before.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dirname</span></code> is removed after each test run ⟶
<a class="reference internal" href="../../unittest/unittest_gtest_fixture/topic.html"><span class="doc">fixture</span></a></p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/fb0c560f5b9a36c5cae1876a811ac8dd/suite.h"><code class="xref download docutils literal notranslate"><span class="pre">code/suite.h</span></code></a></span><a class="headerlink" href="#id1" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#pragma once</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;fixture-tmpdir-cwd.h&gt;</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">filesystem_suite</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">cd_to_tmpdir_fixture</span><span class="w"> </span><span class="p">{};</span>
</pre></div>
</div>
</div>
</section>
<section id="paths-composition-comparison">
<h2><a class="toc-backref" href="#id17" role="doc-backlink">Paths: Composition, Comparison</a><a class="headerlink" href="#paths-composition-comparison" title="Link to this heading">¶</a></h2>
<aside class="sidebar">
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.cppreference.com/w/cpp/filesystem/path">std::filesystem::path</a></p></li>
</ul>
</aside>
<ul class="simple">
<li><p>Paths are OS dependent</p>
<ul>
<li><p>⟶ directory separators, for example (<code class="docutils literal notranslate"><span class="pre">/</span></code> on
Unixen, <code class="docutils literal notranslate"><span class="pre">\</span></code> on Doze)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::filesystem::path</span></code> does not access filesystem</p></li>
<li><p>Used as input to higher level routines</p></li>
<li><p>Main operators: <code class="docutils literal notranslate"><span class="pre">/=</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code></p></li>
<li><p>Lexical comparison</p></li>
<li><p>Largely compatible with <code class="docutils literal notranslate"><span class="pre">std::string</span></code></p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/b5b4039e2e8d5695b071c016439b0abe/path_compose_compare.cpp"><code class="xref download docutils literal notranslate"><span class="pre">code/path_compose_compare.cpp</span></code></a></span><a class="headerlink" href="#id2" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;suite.h&quot;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;filesystem&gt;</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">filesystem_suite</span><span class="p">,</span><span class="w"> </span><span class="n">path_compose_compare</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">path</span><span class="w"> </span><span class="n">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">fn</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="s">&quot;etc&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">fn</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="s">&quot;passwd&quot;</span><span class="p">;</span>

<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/etc/passwd&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/2886b07c40a0a6bc3d65ab8406c4bee2/path_compose_compare_2.cpp"><code class="xref download docutils literal notranslate"><span class="pre">code/path_compose_compare_2.cpp</span></code></a></span><a class="headerlink" href="#id3" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;suite.h&quot;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;filesystem&gt;</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">filesystem_suite</span><span class="p">,</span><span class="w"> </span><span class="n">path_compose_compare_2</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">path</span><span class="w"> </span><span class="n">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/etc&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">path</span><span class="w"> </span><span class="n">passwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fn</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;passwd&quot;</span><span class="p">;</span>

<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">passwd</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/etc/passwd&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="absolute-and-relative-paths">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">Absolute and Relative Paths</a><a class="headerlink" href="#absolute-and-relative-paths" title="Link to this heading">¶</a></h2>
<aside class="sidebar">
<p><strong>See also</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="../../linux/basics/shell/paths.html"><span class="doc">Absolute and Relative Paths</span></a></p></li>
</ul>
</aside>
<table class="docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path.is_absolute()</span></code></p></td>
<td><p>Is <code class="docutils literal notranslate"><span class="pre">path</span></code> a absolute path</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path.is_relative()</span></code></p></td>
<td><p>Is <code class="docutils literal notranslate"><span class="pre">path</span></code> a relative path</p></td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/4eda27b0e096a82b55b044e7ae957137/path_abs_rel.cpp"><code class="xref download docutils literal notranslate"><span class="pre">code/path_abs_rel.cpp</span></code></a></span><a class="headerlink" href="#id4" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;suite.h&quot;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;filesystem&gt;</span>


<span class="n">TEST_F</span><span class="p">(</span><span class="n">filesystem_suite</span><span class="p">,</span><span class="w"> </span><span class="n">path_abs_rel</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">path</span><span class="w"> </span><span class="n">abspath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/etc/passwd&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">abspath</span><span class="p">.</span><span class="n">is_absolute</span><span class="p">());</span>
<span class="w">    </span><span class="n">ASSERT_FALSE</span><span class="p">(</span><span class="n">abspath</span><span class="p">.</span><span class="n">is_relative</span><span class="p">());</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">path</span><span class="w"> </span><span class="n">relpath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;etc/passwd&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">ASSERT_FALSE</span><span class="p">(</span><span class="n">relpath</span><span class="p">.</span><span class="n">is_absolute</span><span class="p">());</span>
<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">relpath</span><span class="p">.</span><span class="n">is_relative</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="path-component-access">
<h2><a class="toc-backref" href="#id19" role="doc-backlink">Path Component Access</a><a class="headerlink" href="#path-component-access" title="Link to this heading">¶</a></h2>
<table class="docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path.filename()</span></code></p></td>
<td><p>extract filename part</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path.parent_path()</span></code></p></td>
<td><p>extract parent directory</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path.remove_filename()</span></code></p></td>
<td><p>remove filename part, leaving parent directory path in place</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path.replace_filename()</span></code></p></td>
<td><p>replace filename part</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path.replace_extension()</span></code></p></td>
<td><p>replace extension</p></td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/d2c3e34fc95b0685a42baf85ef885ee8/path_component_access.cpp"><code class="xref download docutils literal notranslate"><span class="pre">code/path_component_access.cpp</span></code></a></span><a class="headerlink" href="#id5" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;suite.h&quot;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;filesystem&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">filesystem_suite</span><span class="p">,</span><span class="w"> </span><span class="n">path_component_access</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">path</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/a/b/c/blah.txt&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">filename_part</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="p">.</span><span class="n">filename</span><span class="p">();</span>

<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">filename_part</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;blah.txt&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">dir_part</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="p">.</span><span class="n">parent_path</span><span class="p">();</span>
<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">dir_part</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/a/b/c&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">path</span><span class="p">.</span><span class="n">replace_extension</span><span class="p">(</span><span class="s">&quot;TXT&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/a/b/c/blah.TXT&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="iterating-over-path-components">
<h2><a class="toc-backref" href="#id20" role="doc-backlink">Iterating Over Path Components</a><a class="headerlink" href="#iterating-over-path-components" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">path</span></code> is basically a list of strings</p></li>
<li><p>Separated by OS specific directory separators</p></li>
<li><p><em>Absolute paths start with a separator</em></p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/442c18d33b94a084d7af9a8f842ff7c6/path_iteration.cpp"><code class="xref download docutils literal notranslate"><span class="pre">code/path_iteration.cpp</span></code></a></span><a class="headerlink" href="#id6" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;suite.h&quot;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;filesystem&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">filesystem_suite</span><span class="p">,</span><span class="w"> </span><span class="n">path_iteration</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">path</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/etc/passwd&quot;</span><span class="p">;</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">components</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">component</span><span class="o">:</span><span class="w"> </span><span class="n">path</span><span class="p">)</span>
<span class="w">        </span><span class="n">components</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">component</span><span class="p">;</span>

<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">components</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="s">&quot;/&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">components</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="s">&quot;etc&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">components</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="s">&quot;passwd&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="current-working-directory">
<h2><a class="toc-backref" href="#id21" role="doc-backlink">Current Working Directory</a><a class="headerlink" href="#current-working-directory" title="Link to this heading">¶</a></h2>
<aside class="sidebar">
<p><strong>See also</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="../../linux/basics/shell/cwd.html"><span class="doc">Current Working Directory</span></a> (from
<a class="reference internal" href="../../linux/basics/group.html"><span class="doc">Linux Basics</span></a>)</p></li>
</ul>
</aside>
<ul class="simple">
<li><p>Current working directory: process attribute</p></li>
<li><p>Process can change CWD</p></li>
<li><p>… and get it of course</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/5700463a9e06a0b96ab22ff9dc3d4da7/current_directory.cpp"><code class="xref download docutils literal notranslate"><span class="pre">code/current_directory.cpp</span></code></a></span><a class="headerlink" href="#id7" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;suite.h&quot;</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">filesystem_suite</span><span class="p">,</span><span class="w"> </span><span class="n">cwd_chdir</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">current_path</span><span class="p">(</span><span class="n">dirname</span><span class="p">);</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">path</span><span class="w"> </span><span class="n">cwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">current_path</span><span class="p">();</span>
<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">cwd</span><span class="p">,</span><span class="w"> </span><span class="n">dirname</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="directory-creation-std-filesystem-create-directory">
<h2><a class="toc-backref" href="#id22" role="doc-backlink">Directory Creation: <code class="docutils literal notranslate"><span class="pre">std::filesystem::create_directory()</span></code></a><a class="headerlink" href="#directory-creation-std-filesystem-create-directory" title="Link to this heading">¶</a></h2>
<aside class="sidebar">
<p><strong>See also</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="../../linux/basics/shell/file_dir_create_rm.html"><span class="doc">Creating And Removing Files and Directories</span></a> (from
<a class="reference internal" href="../../linux/basics/group.html"><span class="doc">Linux Basics</span></a>)</p></li>
</ul>
</aside>
<ul class="simple">
<li><p>Os wise, creating a directory fail if the parent directory does not
exist (or has no permissions)</p></li>
<li><p>⟶ E.g. <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">-p</span></code> allows you to create paths of
multiple levels</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/112765c150def81c40cbb77c0b5ee11c/create_directory_error.cpp"><code class="xref download docutils literal notranslate"><span class="pre">code/create_directory_error.cpp</span></code></a></span><a class="headerlink" href="#id8" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;suite.h&quot;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;filesystem&gt;</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">filesystem_suite</span><span class="p">,</span><span class="w"> </span><span class="n">create_directory_error</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">create_directory</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;parent/child&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">ASSERT_FALSE</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">filesystem_error</span><span class="o">&amp;</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="w">    </span><span class="c1">// this would be more to the point ...</span>

<span class="w">    </span><span class="c1">//     ASSERT_THROW(std::filesystem::create_directory(dirname / &quot;parent/child&quot;),</span>
<span class="w">    </span><span class="c1">//                  std::filesystem::filesystem_error);</span>

<span class="w">    </span><span class="c1">// ... but (using -O3) ...</span>

<span class="w">    </span><span class="c1">// In file included from /usr/include/c++/12/ios:40,</span>
<span class="w">    </span><span class="c1">//                  from /usr/include/c++/12/ostream:38,</span>
<span class="w">    </span><span class="c1">//                  from /usr/include/c++/12/bits/unique_ptr.h:41,</span>
<span class="w">    </span><span class="c1">//                  from /usr/include/c++/12/memory:76,</span>
<span class="w">    </span><span class="c1">//                  from /home/jfasch/work/jfasch-home/googletest/googletest/include/gtest/gtest.h:55,</span>
<span class="w">    </span><span class="c1">//                  from /home/jfasch/work/jfasch-home/trainings/material/soup/cxx-code/fixtures/./fixture-tmpdir.h:3,</span>
<span class="w">    </span><span class="c1">//                  from /home/jfasch/work/jfasch-home/trainings/material/soup/cxx-code/fixtures/./fixture-tmpdir-cwd.h:3,</span>
<span class="w">    </span><span class="c1">//                  from /home/jfasch/work/jfasch-home/trainings/material/soup/cxx11/filesystem/code/suite.h:3,</span>
<span class="w">    </span><span class="c1">//                  from /home/jfasch/work/jfasch-home/trainings/material/soup/cxx11/filesystem/code/create_directory_error.cpp:1:</span>
<span class="w">    </span><span class="c1">// In static member function ‘static constexpr std::char_traits&lt;char&gt;::char_type* std::char_traits&lt;char&gt;::copy(char_type*, const char_type*, std::size_t)’,</span>
<span class="w">    </span><span class="c1">//     inlined from ‘static constexpr void std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;::_S_copy(_CharT*, const _CharT*, size_type) [with _CharT = char; _Traits = std::char_traits&lt;char&gt;; _Alloc = std::allocator&lt;char&gt;]’ at /usr/include/c++/12/bits/basic_string.h:423:21,</span>
<span class="w">    </span><span class="c1">//     inlined from ‘constexpr std::__cxx11::basic_string&lt;_CharT, _Traits, _Allocator&gt;&amp; std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;::_M_replace(size_type, size_type, const _CharT*, size_type) [with _CharT = char; _Traits = std::char_traits&lt;char&gt;; _Alloc = std::allocator&lt;char&gt;]’ at /usr/include/c++/12/bits/basic_string.tcc:532:22,</span>
<span class="w">    </span><span class="c1">//     inlined from ‘constexpr std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp; std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;::replace(size_type, size_type, const _CharT*, size_type) [with _CharT = char; _Traits = std::char_traits&lt;char&gt;; _Alloc = std::allocator&lt;char&gt;]’ at /usr/include/c++/12/bits/basic_string.h:2171:19,</span>
<span class="w">    </span><span class="c1">//     inlined from ‘constexpr std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp; std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;::replace(size_type, size_type, const _CharT*) [with _CharT = char; _Traits = std::char_traits&lt;char&gt;; _Alloc = std::allocator&lt;char&gt;]’ at /usr/include/c++/12/bits/basic_string.h:2196:22,</span>
<span class="w">    </span><span class="c1">//     inlined from ‘std::string testing::internal::CanonicalizeForStdLibVersioning(std::string)’ at /home/jfasch/work/jfasch-home/googletest/googletest/include/gtest/internal/gtest-type-util.h:83:14:</span>
<span class="w">    </span><span class="c1">// /usr/include/c++/12/bits/char_traits.h:431:56: error: ‘void* __builtin_memcpy(void*, const void*, long unsigned int)’ accessing 9223372036854775810 or more bytes at offsets [2, 9223372036854775807] and 1 may overlap up to 9223372036854775813 bytes at offset -3 [-Werror=restrict]</span>
<span class="w">    </span><span class="c1">//   431 |         return static_cast&lt;char_type*&gt;(__builtin_memcpy(__s1, __s2, __n));</span>
<span class="w">    </span><span class="c1">//       |                                        ~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<ul class="simple">
<li><p>Create directories one at a time</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/8def939fe8b2c1f460dedb609b43f239/create_directory_single.cpp"><code class="xref download docutils literal notranslate"><span class="pre">code/create_directory_single.cpp</span></code></a></span><a class="headerlink" href="#id9" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;suite.h&quot;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;filesystem&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdexcept&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;fstream&gt;</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">filesystem_suite</span><span class="p">,</span><span class="w"> </span><span class="n">create_directory_single</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">create_directory</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;parent&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">create_directory</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;parent/child&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;parent/child/file.txt&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">is_regular_file</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;parent/child/file.txt&quot;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="directory-creation-std-filesystem-create-directories">
<h2><a class="toc-backref" href="#id23" role="doc-backlink">Directory Creation: <code class="docutils literal notranslate"><span class="pre">std::filesystem::create_directories()</span></code></a><a class="headerlink" href="#directory-creation-std-filesystem-create-directories" title="Link to this heading">¶</a></h2>
<aside class="sidebar">
<p><strong>See also</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="../../linux/basics/shell/file_dir_create_rm.html"><span class="doc">Creating And Removing Files and Directories</span></a> (from
<a class="reference internal" href="../../linux/basics/group.html"><span class="doc">Linux Basics</span></a>)</p></li>
</ul>
</aside>
<ul class="simple">
<li><p>Creating multiple level of directories in one shot</p></li>
<li><p>Like <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">-p</span> <span class="pre">...</span></code></p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/069da6a7f5c6ac483ece801fb6c90fd9/create_directory_multiple.cpp"><code class="xref download docutils literal notranslate"><span class="pre">code/create_directory_multiple.cpp</span></code></a></span><a class="headerlink" href="#id10" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;suite.h&quot;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;filesystem&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;fstream&gt;</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">filesystem_suite</span><span class="p">,</span><span class="w"> </span><span class="n">create_directory_multiple</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">create_directories</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;parent/child&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;parent/child/file.txt&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">is_regular_file</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;parent/child/file.txt&quot;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="directory-entry-classification-std-filesystem-is-xxx">
<h2><a class="toc-backref" href="#id24" role="doc-backlink">Directory Entry Classification: <code class="docutils literal notranslate"><span class="pre">std::filesystem::is_xxx()</span></code></a><a class="headerlink" href="#directory-entry-classification-std-filesystem-is-xxx" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Directories may contain files and directories</p></li>
<li><p>Symbolic links, named pipes, character devices, block devices, …</p></li>
<li><p>⟶ classification routines</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/99c0c92e5ac31f4127ff0a576f54099b/is_xxx.cpp"><code class="xref download docutils literal notranslate"><span class="pre">code/is_xxx.cpp</span></code></a></span><a class="headerlink" href="#id11" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;suite.h&quot;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;filesystem&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;fstream&gt;</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">filesystem_suite</span><span class="p">,</span><span class="w"> </span><span class="n">is_xxx</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">create_directory</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">is_directory</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir&quot;</span><span class="p">));</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">is_regular_file</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<aside class="sidebar">
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.cppreference.com/w/cpp/filesystem">std::filesystem</a></p></li>
</ul>
</aside>
<table class="docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_block_file</span></code></p></td>
<td><p>checks whether the given path refers to block device</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_character_file</span></code></p></td>
<td><p>checks whether the given path refers to a character device</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_directory</span></code></p></td>
<td><p>checks whether the given path refers to a directory</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_empty</span></code></p></td>
<td><p>checks whether the given path refers to an empty file or
directory</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_fifo</span></code></p></td>
<td><p>checks whether the given path refers to a named pipe</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_other</span></code></p></td>
<td><p>checks whether the argument refers to an other file</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_regular_file</span></code></p></td>
<td><p>checks whether the argument refers to a regular file</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_socket</span></code></p></td>
<td><p>checks whether the argument refers to a named IPC socket</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_symlink</span></code></p></td>
<td><p>checks whether the argument refers to a symbolic link</p></td>
</tr>
</tbody>
</table>
</section>
<section id="directory-entries-basics">
<h2><a class="toc-backref" href="#id25" role="doc-backlink">Directory Entries: Basics</a><a class="headerlink" href="#directory-entries-basics" title="Link to this heading">¶</a></h2>
<aside class="sidebar">
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.cppreference.com/w/cpp/filesystem/directory_entry">std::filesystem::directory_entry</a></p></li>
<li><p><a class="reference external" href="https://man7.org/linux/man-pages/man2/statx.2.html">man -s 2 stat</a></p></li>
</ul>
</aside>
<ul class="simple">
<li><p>Represents a <em>thing</em> that can be contained in a directory</p></li>
<li><p>OS dependent (as everything in <code class="docutils literal notranslate"><span class="pre">std::filesystem</span></code>)</p></li>
<li><p>Contains</p>
<ul>
<li><p>File type (regular file, directory, symlink, character/block
device, pipe, …)</p></li>
<li><p>File status (permissions, etc.)</p></li>
</ul>
</li>
<li><p>Tries to implement the greatest common divisor across different OSen</p>
<ul>
<li><p>… and fails (in my opinion)</p></li>
</ul>
</li>
<li><p>Unix <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-l</span></code></p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ls<span class="w"> </span>-l<span class="w"> </span>/etc/passwd
<span class="go">-rw-r--r--. 1 root root 2691 Nov 15 15:45 /etc/passwd</span>
</pre></div>
</div>
<ul class="simple">
<li><p>More information: Unix <code class="docutils literal notranslate"><span class="pre">stat</span></code></p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>stat<span class="w"> </span>/etc/passwd
<span class="go">  File: /etc/passwd</span>
<span class="go">  Size: 2691         Blocks: 8          IO Block: 4096   regular file</span>
<span class="go">Device: 0,36 Inode: 919153      Links: 1</span>
<span class="go">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span>
<span class="go">Context: system_u:object_r:passwd_file_t:s0</span>
<span class="go">Access: 2022-12-06 15:00:15.111282886 +0100</span>
<span class="go">Modify: 2022-11-15 15:45:06.737858445 +0100</span>
<span class="go">Change: 2022-11-15 15:45:06.743858359 +0100</span>
<span class="go"> Birth: 2022-11-15 15:45:06.737858445 +0100</span>
</pre></div>
</div>
</section>
<section id="directory-entries-std-filesystem-directory-entry">
<h2><a class="toc-backref" href="#id26" role="doc-backlink">Directory Entries: <code class="docutils literal notranslate"><span class="pre">std::filesystem::directory_entry</span></code></a><a class="headerlink" href="#directory-entries-std-filesystem-directory-entry" title="Link to this heading">¶</a></h2>
<aside class="sidebar">
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.cppreference.com/w/cpp/filesystem/directory_entry">std::filesystem::directory_entry</a></p></li>
</ul>
</aside>
<ul class="simple">
<li><p>Commonly used when iterating over directories (see below)</p></li>
<li><p>Carries information about what’s being iterated over</p></li>
</ul>
<table class="docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">entry.path()</span></code></p></td>
<td><p>returns the path the entry refers to</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">entry.exists()</span></code></p></td>
<td><p>checks whether directory entry refers to existing file system
object</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">entry.is_block_file()</span></code></p></td>
<td><p>checks whether the directory entry refers to block device</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">entry.is_character_file()</span></code></p></td>
<td><p>checks whether the directory entry refers to a character device</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">entry.is_directory()</span></code></p></td>
<td><p>checks whether the directory entry refers to a directory</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">entry.is_fifo()</span></code></p></td>
<td><p>checks whether the directory entry refers to a named pipe</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">entry.is_other()</span></code></p></td>
<td><p>checks whether the directory entry refers to an other file</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">entry.is_regular_file()</span></code></p></td>
<td><p>checks whether the directory entry refers to a regular file</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">entry.is_socket()</span></code></p></td>
<td><p>checks whether the directory entry refers to a named IPC socket</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">entry.is_symlink()</span></code></p></td>
<td><p>checks whether the directory entry refers to a symbolic link</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">entry.file_size()</span></code></p></td>
<td><p>returns the size of the file to which the directory entry
refers</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">entry.hard_link_count()</span></code></p></td>
<td><p>returns the number of hard links referring to the file to which
the directory entry refers</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">entry.last_write_time()</span></code></p></td>
<td><p>gets or sets the time of the last data modification of the file
to which the directory entry refers</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">entry.status()</span></code></p></td>
<td><p>status of the file designated by this directory entry</p></td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/0f5887024719e691fdfae6f64b142bf9/directory_entry.cpp"><code class="xref download docutils literal notranslate"><span class="pre">code/directory_entry.cpp</span></code></a></span><a class="headerlink" href="#id12" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;suite.h&quot;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;filesystem&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;fstream&gt;</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">filesystem_suite</span><span class="p">,</span><span class="w"> </span><span class="n">directory_entry</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">create_directory</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="p">).</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;Hallo&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">directory_entry</span><span class="w"> </span><span class="n">subdir</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">subdir</span><span class="p">.</span><span class="n">is_directory</span><span class="p">());</span>
<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">subdir</span><span class="p">.</span><span class="n">path</span><span class="p">(),</span><span class="w"> </span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">directory_entry</span><span class="w"> </span><span class="n">file</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="n">is_regular_file</span><span class="p">());</span>
<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="n">path</span><span class="p">(),</span><span class="w"> </span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="n">file_size</span><span class="p">(),</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="iterating-over-directory-entries">
<h2><a class="toc-backref" href="#id27" role="doc-backlink">Iterating Over Directory Entries</a><a class="headerlink" href="#iterating-over-directory-entries" title="Link to this heading">¶</a></h2>
<aside class="sidebar">
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://man7.org/linux/man-pages/man3/readdir.3.html">man -s 3 readdir</a></p></li>
</ul>
<p><strong>See also</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="../../cxx03/060-stl/010-basics/topic.html"><span class="doc">Standard Template Library: Basics</span></a></p></li>
</ul>
</aside>
<ul class="simple">
<li><p>Directories contain entries</p>
<ul>
<li><p>⟶ want to iterate over those</p></li>
<li><p>⟶ <a class="reference internal" href="../../cxx03/060-stl/010-basics/topic.html"><span class="doc">C++ iterators</span></a></p></li>
</ul>
</li>
<li><p>OS wise, directories are not read in any particular order</p></li>
<li><p>File system specific (e.h. <code class="docutils literal notranslate"><span class="pre">ext4</span></code> might be different from
<code class="docutils literal notranslate"><span class="pre">btrfs</span></code> from <code class="docutils literal notranslate"><span class="pre">ntfs</span></code>)</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/b5ec8df48389772080c1b32c9003be1a/directory_iterator.cpp"><code class="xref download docutils literal notranslate"><span class="pre">code/directory_iterator.cpp</span></code></a></span><a class="headerlink" href="#id13" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;suite.h&quot;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;filesystem&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;fstream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">filesystem_suite</span><span class="p">,</span><span class="w"> </span><span class="n">directory_iterator</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">create_directory</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir1&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">create_directory</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir2&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir1/file&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir2/file&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;file1&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;file2&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">path</span><span class="o">&gt;</span><span class="w"> </span><span class="n">entries</span><span class="p">;</span><span class="w">         </span><span class="c1">// &lt;--- iteration order is not (necessarily) creation order</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">diriter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">directory_iterator</span><span class="p">(</span><span class="n">dirname</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">directory_entry</span><span class="o">&amp;</span><span class="w"> </span><span class="n">entry</span><span class="o">:</span><span class="w"> </span><span class="n">diriter</span><span class="p">)</span>
<span class="w">        </span><span class="n">entries</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">entry</span><span class="p">);</span>

<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">entries</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span><span class="w">                    </span><span class="c1">// &lt;--- not 6! (no recursion)</span>

<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">entries</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir1&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">entries</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir2&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">entries</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;file1&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">entries</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;file2&quot;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="recursive-directory-iteration">
<h2><a class="toc-backref" href="#id28" role="doc-backlink">Recursive Directory Iteration</a><a class="headerlink" href="#recursive-directory-iteration" title="Link to this heading">¶</a></h2>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="../../../../../_downloads/ce701447d6050002afcfe7023bda2a04/recursive_directory_iterator.cpp"><code class="xref download docutils literal notranslate"><span class="pre">code/recursive_directory_iterator.cpp</span></code></a></span><a class="headerlink" href="#id14" title="Link to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;suite.h&quot;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;filesystem&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;fstream&gt;</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">filesystem_suite</span><span class="p">,</span><span class="w"> </span><span class="n">recursive_directory_iterator</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">create_directory</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir1&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">create_directory</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir2&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir1/file&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir2/file&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;file1&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;file2&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">diriter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">recursive_directory_iterator</span><span class="p">(</span><span class="n">dirname</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">path</span><span class="o">&gt;</span><span class="w"> </span><span class="n">entries</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">entry</span><span class="o">:</span><span class="w"> </span><span class="n">diriter</span><span class="p">)</span>
<span class="w">        </span><span class="n">entries</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">entry</span><span class="p">);</span>

<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">entries</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="w"> </span><span class="mi">6</span><span class="p">);</span><span class="w">                  </span><span class="c1">// &lt;--- *recursive*: hitting entries in subdirs too</span>

<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">entries</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir1&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">entries</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir2&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">entries</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir1/file&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">entries</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;subdir2/file&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">entries</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;file1&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">entries</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">dirname</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;file2&quot;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
</section>

<div class="section">
   
</div>

          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2019-2023 (GPLv3), Jörg Faschingbauer.
      
      |
      <a href="../../../../../_sources/trainings/material/soup/cxx11/filesystem/topic.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>