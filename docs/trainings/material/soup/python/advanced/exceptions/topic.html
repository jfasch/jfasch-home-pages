<!DOCTYPE html>

<html lang="en" data-content_root="../../../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Exception Handling &#8212; Jörg Faschingbauer</title>
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/alabaster.css?v=cf071e93" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/css/jf-alabaster.css?v=70eaaddc" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css?v=5c84f910" />
    <script src="../../../../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js?v=ffc8af2d"></script>
    <script src="../../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js?v=12818e64"></script>
    <link rel="canonical" href="https://www.faschingbauer.me/trainings/material/soup/python/advanced/exceptions/topic.html" />
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
    <link rel="next" title="Iterating Intelligently: Generators, and the Iterator Protocol" href="../iteration-generation/topic.html" />
    <link rel="prev" title="Comprehensions (List, Dictionary, Set)" href="../comprehensions/topic.html" />

   
  <link rel="stylesheet" href="../../../../../../_static/custom.css" type="text/css" />
  

  
  


<link
  rel="alternate"
  type="application/atom+xml"
  href="../../../../../../blog/atom.xml"
  title="Jörg Faschingbauer"
/>


<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet"/>


  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../../../../../index.html">
    <img class="logo" src="../../../../../../_static/logo.png" alt="Logo" />
    
  </a>
</p>



<p class="blurb">Programming Linux</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Courses</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../index.html">Courses Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Slide Material</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../linux/group.html">Linux</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../group.html">Python Programming</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../basics/group.html">Python: The Language Fundamentals</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../group.html">Python: More Language Features</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../comprehensions/topic.html">Comprehensions (List, Dictionary, Set)</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Exception Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iteration-generation/topic.html">Iterating Intelligently: Generators, and the Iterator Protocol</a></li>
<li class="toctree-l4"><a class="reference internal" href="../starargs/topic.html">Positional and Keyword Arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../closures/topic.html">Closures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../decorators/topic.html">Decorators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../context-mgr/topic.html">Context Managers: The <code class="docutils literal notranslate"><span class="pre">with</span></code> Statement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../exec/topic.html">The <code class="docutils literal notranslate"><span class="pre">exec()</span></code> Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../oo/group.html">Object Oriented Programming</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules.html">Modules and Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../multithreading/group.html">Multithreading</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../swdev/group.html">Python: Project/Package Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../misc/group.html">Python: Miscellaneous Topics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../drafts/group.html">Python: Draft Topics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../link-collection.html">Python Links</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../exercises/group.html">Exercises</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../c/group.html">The C Programming Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cxx-todo/index.html">C++: TODO List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cxx/group.html">C++: Miscellaneous Live-Hacking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cxx03/group.html">C++</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cxx11/group.html">The New C++ (11-…)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cxx-design-patterns/group.html">Design Patterns With C++</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cxx-code/index.html">C++ Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cxx-exercises/group.html">C++ Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cmake/group.html">CMake</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../clean-code/group.html">Is Software A Craft? Software Is A Craft! ⟶ <em>Clean Code</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../unittest/group.html">Unit Testing With <code class="docutils literal notranslate"><span class="pre">googletest</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../booking.html">How To Book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../log/index.html">Log Of Past Courses</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../about/myself/index.html">Myself: Contact, Impressum, …</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../about/site/index.html">This Site</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Blog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../blog/index.html">Posts</a></li>
</ul>


        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
<section id="exception-handling">
<h1>Exception Handling<a class="headerlink" href="#exception-handling" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id1">Introduction</a></p></li>
<li><p><a class="reference internal" href="#basic-exception-handling-try-except" id="id2">Basic Exception Handling: <code class="docutils literal notranslate"><span class="pre">try</span></code>, <code class="docutils literal notranslate"><span class="pre">except</span></code></a></p></li>
<li><p><a class="reference internal" href="#catching-exceptions-by-type" id="id3">Catching Exceptions By Type</a></p></li>
<li><p><a class="reference internal" href="#exception-objects" id="id4">Exception Objects</a></p></li>
<li><p><a class="reference internal" href="#catching-multiple-exception-types-exception-list" id="id5">Catching Multiple Exception Types: Exception List</a></p></li>
<li><p><a class="reference internal" href="#catching-multiple-exception-types-multiple-except-clauses" id="id6">Catching Multiple Exception Types: Multiple <code class="docutils literal notranslate"><span class="pre">except</span></code> Clauses</a></p></li>
<li><p><a class="reference internal" href="#catching-multiple-exception-types-by-base-type" id="id7">Catching Multiple Exception Types: By Base Type</a></p></li>
<li><p><a class="reference internal" href="#important-order-of-except-clauses" id="id8">Important: Order Of <code class="docutils literal notranslate"><span class="pre">except</span></code> Clauses</a></p></li>
<li><p><a class="reference internal" href="#built-in-exception-hierarchy" id="id9">Built-In Exception Hierarchy</a></p></li>
<li><p><a class="reference internal" href="#raising-exceptions" id="id10">Raising Exceptions</a></p></li>
<li><p><a class="reference internal" href="#re-raising-exceptions" id="id11">Re-Raising Exceptions</a></p></li>
<li><p><a class="reference internal" href="#user-defined-exceptions" id="id12">User-Defined Exceptions</a></p></li>
<li><p><a class="reference internal" href="#user-defined-exceptions-more" id="id13">User-Defined Exceptions: More</a></p></li>
<li><p><a class="reference internal" href="#else-executed-if-no-exception" id="id14"><code class="docutils literal notranslate"><span class="pre">else</span></code>: Executed If No Exception</a></p></li>
<li><p><a class="reference internal" href="#finally-executed-regardless-of-exception" id="id15"><code class="docutils literal notranslate"><span class="pre">finally</span></code>: Executed Regardless Of Exception</a></p></li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>Keywords that cover blocks:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">try</span></code>: try to execute potentially harmful code - <em>might raise exceptions</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">except</span></code>: react on those exceptions - <em>catch</em> them</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">finally</span></code>: executed in <em>any</em> case, no matter if raised or not</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">else</span></code>: executed if <em>no</em> exceptions was raised</p></li>
</ul>
<p>A few examples are in order …</p>
</section>
<section id="basic-exception-handling-try-except">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Basic Exception Handling: <code class="docutils literal notranslate"><span class="pre">try</span></code>, <code class="docutils literal notranslate"><span class="pre">except</span></code></a><a class="headerlink" href="#basic-exception-handling-try-except" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Catching an exception <em>no matter what</em></p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;file-that-does-not-exist.txt&#39;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>                     <span class="c1"># &lt;--- unconditionally catching *any* error</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bad luck&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>bad luck
</pre></div>
</div>
</div>
</div>
</li>
<li><p><strong>Usually not a good idea</strong>: covers other more severe errors</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a_variable</span><span class="p">)</span>       <span class="c1"># &lt;--- raises NameError!</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;file-that-does-not-exist.txt&#39;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bad luck&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>bad luck
</pre></div>
</div>
</div>
</div>
</li>
<li><p>⟶ catch exception <em>by their type</em></p></li>
</ul>
</section>
<section id="catching-exceptions-by-type">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Catching Exceptions By Type</a><a class="headerlink" href="#catching-exceptions-by-type" title="Link to this heading">¶</a></h2>
<ul>
<li><p>More specific reaction on errors: <em>by type</em></p></li>
<li><p>E.g.: <code class="docutils literal notranslate"><span class="pre">open()</span></code> raises <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> when … well … file
is not found</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;file-that-does-not-exist.txt&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;file not there&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>file not there
</pre></div>
</div>
</div>
</div>
</li>
</ul>
</section>
<section id="exception-objects">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Exception Objects</a><a class="headerlink" href="#exception-objects" title="Link to this heading">¶</a></h2>
<aside class="sidebar">
<p><strong>See also</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="../oo/str-repr/topic.html"><span class="doc">str() And repr()</span></a></p></li>
</ul>
</aside>
<ul>
<li><p>Exceptions are objects</p></li>
<li><p>Can carry anything that’s relevant to the error</p></li>
<li><p>Usually implement <code class="docutils literal notranslate"><span class="pre">__str__()</span></code> ⟶ printable</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;file-that-does-not-exist.txt&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;file not there:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>file not there: [Errno 2] No such file or directory: &#39;file-that-does-not-exist.txt&#39;
</pre></div>
</div>
</div>
</div>
</li>
</ul>
</section>
<section id="catching-multiple-exception-types-exception-list">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Catching Multiple Exception Types: Exception List</a><a class="headerlink" href="#catching-multiple-exception-types-exception-list" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Different error at the same level: <code class="docutils literal notranslate"><span class="pre">PermissionError</span></code></p></li>
<li><p>E.g. when a file has no read permissions</p>
<div class="jupyter_cell docutils container">
<div class="cell_output docutils container">
</div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>----------. 1 jfasch jfasch 0 May 12 09:23 /tmp/some-file.txt
</pre></div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/tmp/some-file.txt&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">PermissionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bad luck on permissions:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>bad luck on permissions: [Errno 13] Permission denied: &#39;/tmp/some-file.txt&#39;
</pre></div>
</div>
</div>
</div>
</li>
<li><p>Catching both <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> and <code class="docutils literal notranslate"><span class="pre">PermissionError</span></code> at once</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/tmp/some-file.txt&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="p">(</span><span class="ne">FileNotFoundError</span><span class="p">,</span> <span class="ne">PermissionError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;either file not there, or bad luck on permissions:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>either file not there, or bad luck on permissions: [Errno 13] Permission denied: &#39;/tmp/some-file.txt&#39;
</pre></div>
</div>
</div>
</div>
</li>
</ul>
</section>
<section id="catching-multiple-exception-types-multiple-except-clauses">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Catching Multiple Exception Types: Multiple <code class="docutils literal notranslate"><span class="pre">except</span></code> Clauses</a><a class="headerlink" href="#catching-multiple-exception-types-multiple-except-clauses" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Specific handling of a number of different exceptions</p></li>
<li><p>⟶ multiple <code class="docutils literal notranslate"><span class="pre">except</span></code> clauses in a row</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/tmp/some-file.txt&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;file not there:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">PermissionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bad luck on permissions:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>bad luck on permissions: [Errno 13] Permission denied: &#39;/tmp/some-file.txt&#39;
</pre></div>
</div>
</div>
</div>
</li>
</ul>
</section>
<section id="catching-multiple-exception-types-by-base-type">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Catching Multiple Exception Types: By Base Type</a><a class="headerlink" href="#catching-multiple-exception-types-by-base-type" title="Link to this heading">¶</a></h2>
<aside class="sidebar">
<p><strong>See also</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="../oo/inheritance/topic.html"><span class="doc">Inheritance</span></a></p></li>
</ul>
</aside>
<ul>
<li><p>Both <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> and <code class="docutils literal notranslate"><span class="pre">PermissionError</span></code> are
<a class="reference internal" href="../oo/inheritance/topic.html"><span class="doc">subclasses</span></a> of
<code class="docutils literal notranslate"><span class="pre">OSError</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">...</span>
<span class="go"> └── OSError</span>
<span class="go">      ├── FileNotFoundError</span>
<span class="go">      ├── ... many more ...</span>
<span class="go">      └── PermissionError</span>
</pre></div>
</div>
</li>
<li><p>⟶ Catching <code class="docutils literal notranslate"><span class="pre">OSError</span></code> covers both</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/tmp/some-file.txt&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>            <span class="c1"># &lt;--- FileNotFoundError and PermissionError (and ...)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bad luck, OS-wise:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>bad luck, OS-wise: [Errno 13] Permission denied: &#39;/tmp/some-file.txt&#39;
</pre></div>
</div>
</div>
</div>
</li>
</ul>
</section>
<section id="important-order-of-except-clauses">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Important: Order Of <code class="docutils literal notranslate"><span class="pre">except</span></code> Clauses</a><a class="headerlink" href="#important-order-of-except-clauses" title="Link to this heading">¶</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">except</span></code> clauses are evaluated in order of appearance</p></li>
<li><p>Traversal stops at first match</p></li>
<li><p><em>The following is generally unwanted</em></p></li>
<li><p>⟶ <code class="docutils literal notranslate"><span class="pre">OSError</span></code> swallows any <code class="docutils literal notranslate"><span class="pre">open()</span></code> error,
preventing specific handling of <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> and
<code class="docutils literal notranslate"><span class="pre">PermissionError</span></code></p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/tmp/some-file.txt&#39;</span><span class="p">)</span>       <span class="c1"># &lt;--- raises PermissionError</span>
<span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>                 <span class="c1"># &lt;--- matches PermissionError (which is-a OSError)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bad luck, OS-wise:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>       <span class="c1"># &lt;--- skipped</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;file not there:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">PermissionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>         <span class="c1"># &lt;--- skipped</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bad luck on permissions:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>bad luck, OS-wise: [Errno 13] Permission denied: &#39;/tmp/some-file.txt&#39;
</pre></div>
</div>
</div>
</div>
</li>
<li><p>Put more specific errors at the top</p></li>
<li><p>Base classes at the bottom</p></li>
<li><p>⟶ <em>sort by specificity</em></p></li>
<li><p>⟶ fallback error handling</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/tmp/some-file.txt&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;file not there:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">PermissionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bad luck on permissions:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>               <span class="c1"># &lt;--- fallback for other types of OSError</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bad luck, OS-wise:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>bad luck on permissions: [Errno 13] Permission denied: &#39;/tmp/some-file.txt&#39;
</pre></div>
</div>
</div>
</div>
</li>
</ul>
</section>
<section id="built-in-exception-hierarchy">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Built-In Exception Hierarchy</a><a class="headerlink" href="#built-in-exception-hierarchy" title="Link to this heading">¶</a></h2>
<aside class="sidebar">
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html" title="(in Python v3.13)"><span>Built-in Exceptions</span></a></p></li>
</ul>
</aside>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BaseException</span></code> is the root of all exceptions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Exception</span></code> is the root of all non-system-exiting exceptions</p></li>
<li><p>User-defined exceptions should derive from <code class="docutils literal notranslate"><span class="pre">Exception</span></code></p></li>
<li><p>(Not a hard rule though)</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">BaseException</span>
<span class="go"> ├── BaseExceptionGroup</span>
<span class="go"> ├── GeneratorExit</span>
<span class="go"> ├── KeyboardInterrupt</span>
<span class="go"> ├── SystemExit</span>
<span class="go"> └── Exception</span>
<span class="go">      ├── ArithmeticError</span>
<span class="go">      │    ├── FloatingPointError</span>
<span class="go">      │    ├── OverflowError</span>
<span class="go">      │    └── ZeroDivisionError</span>
<span class="go">      ├── AssertionError</span>
<span class="go">      ├── AttributeError</span>
<span class="go">      ├── BufferError</span>
<span class="go">      ├── EOFError</span>
<span class="go">      ├── ExceptionGroup [BaseExceptionGroup]</span>
<span class="go">      ├── ImportError</span>
<span class="go">      │    └── ModuleNotFoundError</span>
<span class="go">      ├── LookupError</span>
<span class="go">      │    ├── IndexError</span>
<span class="go">      │    └── KeyError</span>
<span class="go">      ├── MemoryError</span>
<span class="go">      ├── NameError</span>
<span class="go">      │    └── UnboundLocalError</span>
<span class="go">      ├── OSError</span>
<span class="go">      │    ├── BlockingIOError</span>
<span class="go">      │    ├── ChildProcessError</span>
<span class="go">      │    ├── ConnectionError</span>
<span class="go">      │    │    ├── BrokenPipeError</span>
<span class="go">      │    │    ├── ConnectionAbortedError</span>
<span class="go">      │    │    ├── ConnectionRefusedError</span>
<span class="go">      │    │    └── ConnectionResetError</span>
<span class="go">      │    ├── FileExistsError</span>
<span class="go">      │    ├── FileNotFoundError</span>
<span class="go">      │    ├── InterruptedError</span>
<span class="go">      │    ├── IsADirectoryError</span>
<span class="go">      │    ├── NotADirectoryError</span>
<span class="go">      │    ├── PermissionError</span>
<span class="go">      │    ├── ProcessLookupError</span>
<span class="go">      │    └── TimeoutError</span>
<span class="go">      ├── ReferenceError</span>
<span class="go">      ├── RuntimeError</span>
<span class="go">      │    ├── NotImplementedError</span>
<span class="go">      │    └── RecursionError</span>
<span class="go">      ├── StopAsyncIteration</span>
<span class="go">      ├── StopIteration</span>
<span class="go">      ├── SyntaxError</span>
<span class="go">      │    └── IndentationError</span>
<span class="go">      │         └── TabError</span>
<span class="go">      ├── SystemError</span>
<span class="go">      ├── TypeError</span>
<span class="go">      ├── ValueError</span>
<span class="go">      │    └── UnicodeError</span>
<span class="go">      │         ├── UnicodeDecodeError</span>
<span class="go">      │         ├── UnicodeEncodeError</span>
<span class="go">      │         └── UnicodeTranslateError</span>
<span class="go">      └── Warning</span>
<span class="go">           ├── BytesWarning</span>
<span class="go">           ├── DeprecationWarning</span>
<span class="go">           ├── EncodingWarning</span>
<span class="go">           ├── FutureWarning</span>
<span class="go">           ├── ImportWarning</span>
<span class="go">           ├── PendingDeprecationWarning</span>
<span class="go">           ├── ResourceWarning</span>
<span class="go">           ├── RuntimeWarning</span>
<span class="go">           ├── SyntaxWarning</span>
<span class="go">           ├── UnicodeWarning</span>
<span class="go">           └── UserWarning</span>
</pre></div>
</div>
</section>
<section id="raising-exceptions">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Raising Exceptions</a><a class="headerlink" href="#raising-exceptions" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">raise</span></code> an exception object</p></li>
<li><p>Exception object is an instance of a class - the exception’s class</p></li>
<li><p>No secret here: exceptions are objects like anything else</p></li>
<li><p>Can only <code class="docutils literal notranslate"><span class="pre">raise</span></code> subtypes of <code class="docutils literal notranslate"><span class="pre">BaseException</span></code> though</p></li>
</ul>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">maybe_fail</span><span class="p">(</span><span class="n">answer</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">answer</span> <span class="o">!=</span> <span class="mi">42</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;wrong answer&#39;</span><span class="p">)</span>

<span class="n">maybe_fail</span><span class="p">(</span><span class="mi">666</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">RuntimeError</span><span class="g g-Whitespace">                              </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span> <span class="n">line</span> <span class="mi">5</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>     <span class="k">if</span> <span class="n">answer</span> <span class="o">!=</span> <span class="mi">42</span><span class="p">:</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>         <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;wrong answer&#39;</span><span class="p">)</span>
<span class="ne">----&gt; </span><span class="mi">5</span> <span class="n">maybe_fail</span><span class="p">(</span><span class="mi">666</span><span class="p">)</span>

<span class="nn">Cell In[12], line 3,</span> in <span class="ni">maybe_fail</span><span class="nt">(answer)</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="k">def</span> <span class="nf">maybe_fail</span><span class="p">(</span><span class="n">answer</span><span class="p">):</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>     <span class="k">if</span> <span class="n">answer</span> <span class="o">!=</span> <span class="mi">42</span><span class="p">:</span>
<span class="ne">----&gt; </span><span class="mi">3</span>         <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;wrong answer&#39;</span><span class="p">)</span>

<span class="ne">RuntimeError</span>: wrong answer
</pre></div>
</div>
</div>
</div>
</section>
<section id="re-raising-exceptions">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Re-Raising Exceptions</a><a class="headerlink" href="#re-raising-exceptions" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Want to only shortly intercept an exception on its way through</p></li>
<li><p>Otherwise pass it on unmodified</p></li>
<li><p>⟶ a lone <code class="docutils literal notranslate"><span class="pre">raise</span></code> statement</p></li>
</ul>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">maybe_fail</span><span class="p">(</span><span class="n">answer</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">answer</span> <span class="o">!=</span> <span class="mi">42</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;wrong answer&#39;</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
   <span class="n">maybe_fail</span><span class="p">(</span><span class="mi">666</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
   <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;argh!&#39;</span><span class="p">)</span>
   <span class="k">raise</span>             <span class="c1"># &lt;--- re-raise same exception</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>argh!
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">RuntimeError</span><span class="g g-Whitespace">                              </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">13</span><span class="p">],</span> <span class="n">line</span> <span class="mi">6</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>         <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;wrong answer&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">----&gt; </span><span class="mi">6</span>    <span class="n">maybe_fail</span><span class="p">(</span><span class="mi">666</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;argh!&#39;</span><span class="p">)</span>

<span class="nn">Cell In[13], line 3,</span> in <span class="ni">maybe_fail</span><span class="nt">(answer)</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="k">def</span> <span class="nf">maybe_fail</span><span class="p">(</span><span class="n">answer</span><span class="p">):</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>     <span class="k">if</span> <span class="n">answer</span> <span class="o">!=</span> <span class="mi">42</span><span class="p">:</span>
<span class="ne">----&gt; </span><span class="mi">3</span>         <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;wrong answer&#39;</span><span class="p">)</span>

<span class="ne">RuntimeError</span>: wrong answer
</pre></div>
</div>
</div>
</div>
</section>
<section id="user-defined-exceptions">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">User-Defined Exceptions</a><a class="headerlink" href="#user-defined-exceptions" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Built-in exceptions can be raised in user code</p></li>
<li><p>⟶ <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code> is a good candidate when defining
one’s own exception hierarchy is too much work</p></li>
<li><p>Not always enough though</p></li>
<li><p>Convention, not law: <em>derive user-defined exceptions from</em>
<code class="docutils literal notranslate"><span class="pre">Exception</span></code></p></li>
</ul>
<p>Minimal hierarchy - just the types are of interest …</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MySubsystemError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">ReallyBadError</span><span class="p">(</span><span class="n">MySubsystemError</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">SomeOtherError</span><span class="p">(</span><span class="n">MySubsystemError</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</section>
<section id="user-defined-exceptions-more">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">User-Defined Exceptions: More</a><a class="headerlink" href="#user-defined-exceptions-more" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Why not store common data (e.g. <code class="docutils literal notranslate"><span class="pre">OSError</span></code> has a <code class="docutils literal notranslate"><span class="pre">errno</span></code>
attribute) …</p></li>
<li><p>A possible error scheme would be as follows</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">DefinitelyBad</span><span class="p">,</span> <span class="n">EvenWorse</span><span class="p">,</span> <span class="n">CollapsingTheWorld</span><span class="p">)</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MySubsystemError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>           <span class="c1"># &lt;--- common base class for all subsystem errors</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">errorcode</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">errorcode</span> <span class="o">=</span> <span class="n">errorcode</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39; (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">errorcode</span><span class="si">}</span><span class="s1">)&#39;</span>

<span class="k">class</span> <span class="nc">ReallyBadError</span><span class="p">(</span><span class="n">MySubsystemError</span><span class="p">):</span>      <span class="c1"># &lt;--- one error</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">SomeOtherError</span><span class="p">(</span><span class="n">MySubsystemError</span><span class="p">):</span>      <span class="c1"># &lt;--- another error</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</li>
<li><p>The “subsystem” implementation</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">answer</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">answer</span> <span class="o">!=</span> <span class="mi">42</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ReallyBadError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Bad answer: </span><span class="si">{</span><span class="n">answer</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">DefinitelyBad</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</li>
<li><p>“subsystem” usage</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">foo</span><span class="p">(</span><span class="mi">666</span><span class="p">)</span>
<span class="k">except</span> <span class="n">MySubsystemError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>                <span class="c1"># &lt;--- only interested in base type</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>Bad answer: 666 (1)
</pre></div>
</div>
</div>
</div>
</li>
</ul>
</section>
<section id="else-executed-if-no-exception">
<h2><a class="toc-backref" href="#id14" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">else</span></code>: Executed If No Exception</a><a class="headerlink" href="#else-executed-if-no-exception" title="Link to this heading">¶</a></h2>
<ul>
<li><p><em>Separation of concerns</em></p></li>
<li><p>Executed if no exception was raised</p></li>
<li><p>Must come directly after <code class="docutils literal notranslate"><span class="pre">except</span></code> clauses (and before <code class="docutils literal notranslate"><span class="pre">finally</span></code>
if any)</p></li>
<li><p>(Sadly) a syntax error if no <code class="docutils literal notranslate"><span class="pre">except</span></code> clause is present</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/etc/passwd&#39;</span><span class="p">)</span>        <span class="c1"># &lt;--- succeeds</span>
<span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>           <span class="c1"># &lt;--- must be there (syntax error otherwise)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bad luck, OS-wise:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;all well&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>all well
</pre></div>
</div>
</div>
</div>
</li>
</ul>
</section>
<section id="finally-executed-regardless-of-exception">
<h2><a class="toc-backref" href="#id15" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">finally</span></code>: Executed Regardless Of Exception</a><a class="headerlink" href="#finally-executed-regardless-of-exception" title="Link to this heading">¶</a></h2>
<ul>
<li><p><em>Separation of concerns</em></p></li>
<li><p>Error-unrelated things done in <code class="docutils literal notranslate"><span class="pre">finally</span></code> block</p></li>
<li><p>Executed regardless if an exception was raised or not</p></li>
<li><p>Must come last (after any <code class="docutils literal notranslate"><span class="pre">except</span></code> and <code class="docutils literal notranslate"><span class="pre">else</span></code> clauses)</p></li>
<li><p>Here the error case:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/tmp/some-file.txt&#39;</span><span class="p">)</span>           <span class="c1"># &lt;--- fails</span>
<span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bad luck, OS-wise:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;doing error-unrelated stuff&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>bad luck, OS-wise: [Errno 13] Permission denied: &#39;/tmp/some-file.txt&#39;
doing error-unrelated stuff
</pre></div>
</div>
</div>
</div>
</li>
<li><p>And the sunny case</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/etc/passwd&#39;</span><span class="p">)</span>                  <span class="c1"># &lt;--- succeeds</span>
<span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bad luck, OS-wise:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;doing error-unrelated stuff&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>doing error-unrelated stuff
</pre></div>
</div>
</div>
</div>
</li>
</ul>
</section>
</section>

<div class="section ablog__blog_comments">
  
  
</div>

          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2019-2025 (GPLv3), Jörg Faschingbauer.
      
      |
      <a href="../../../../../../_sources/trainings/material/soup/python/advanced/exceptions/topic.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>